<!-- Menu toggle button -->

<a href="" class="dropdown-toggle" data-toggle="dropdown">
  <i class="fa fa-bell"></i>
  <span ng-show="!zeroNotif" class="label label-warning">{{notifs.length + registrations.length}}</span>
</a>

<ul class="dropdown-menu animated-dropdown-menu outerMenu">
  <li ng-show="!oneNotif" class="header">You have {{notifs.length}} new notifications</li>
  <li ng-show="oneNotif" class="header">You have 1 new notification</li>

    <!-- Inner Menu: contains the notifications -->
    <ul class="menu innerMenu">

 <!-- Unread device notifications !hotovo! -->
      <li ng-repeat="notif in notifs" ng-show="(notif.type=='deviceRequest') && (notif.status== 'waiting') ">    <!-- | filter: searchfilter1-->
        <span class="ciara"></span>
        <div class="notification-avatar">
          <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">
           <img  class="img-circle imgNotif" ng-src="{{notif.deviceId.avatar}}" alt="Device Avatar">
          </a>
        </div>
        <div class="notification-description"><p>You have device data request from <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">{{notif.sentBy.organisation}}</a>.</p>
        </div>
        <div class="notification-actions">
          <button  ng-click="acceptDataRequest(notif.deviceId._id, notif._id)" type="button" class="btn btn-default btn-xs">Approve</button>
          <button  ng-click="rejectDataRequest(notif.deviceId._id, notif._id)" type="button" class="btn btn-default btn-xs">Reject</button>
        </div>
      </li>
 <!-- Unread friend notifications !hotovo!-->
     <li ng-repeat="notif in notifs" ng-show="(notif.type=='friendRequest') && (notif.status== 'waiting') " >  <!-- | filter: searchfilter2 -->
       <span class="ciara"></span>
       <div class="notification-avatar">
         <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">
          <img class="img-circle imgNotif" ng-src="{{notif.sentBy.avatar}}" alt="Company Avatar">
         </a>
       </div>
       <div class="notification-description"><p>You have partnership request from <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">{{notif.sentBy.organisation}}</a>.</p>
       </div>
       <div class="notification-actions">
         <button  ng-click="acceptNeighbourRequest(notif._id, notif.sentBy._id)" type="button" class="btn btn-default btn-xs">Accept</button>     <!-- ng-show="notif.status =='waiting'" -->
         <button  ng-click="rejectNeighbourRequest(notif._id, notif.sentBy._id)" type="button" class="btn btn-default btn-xs">Decline</button>
       </div>
     </li>

 <!-- Unread approved device notification !hotovo! -->
      <li ng-repeat="notif in notifs" ng-show="(notif.type=='deviceRequest') && (notif.status== 'accepted') ">  <!-- | filter: searchfilter3 -->
        <span class="ciara"></span>
        <div class="notification-avatar">
          <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">
            <img class="img-circle imgNotif" ng-src="{{notif.deviceId.avatar}}" alt="Device Avatar">
          </a>
        </div>
        <div class="notification-description">
          <p>You've got data access to device <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">{{notif.deviceId.name}}</a>.</p>
        </div>
      </li>
 <!-- Unread approved friend notifications !hotovo!-->
      <li ng-repeat="notif in notifs" ng-show="(notif.type=='friendRequest') && (notif.status== 'accepted')">     <!-- | filter: searchfilter4"-->
        <span class="ciara"></span>
        <div class="notification-avatar">
          <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">
            <img class="img-circle imgNotif" ng-src="{{notif.sentBy.avatar}}" alt="Company Avatar">
          </a>
        </div>
        <div class="notification-description"><p>You are partner with <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">{{notif.sentBy.organisation}}</a>.</p>
        </div>
      </li>
      <!-- Unread rejected device notification !hotovo! -->
           <li ng-repeat="notif in notifs" ng-show="(notif.type=='deviceRequest') && (notif.status== 'rejected') ">  <!-- | filter: searchfilter3 -->
             <span class="ciara"></span>
             <div class="notification-avatar">
               <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">
                 <img class="img-circle imgNotif" ng-src="{{notif.deviceId.avatar}}" alt="Device Avatar">
               </a>
             </div>
             <div class="notification-description">
               <p>Your data access to device <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">{{notif.deviceId.name}}</a> has been rejected.</p>
             </div>
           </li>
      <!-- Unread rejected friend notifications !hotovo!-->
           <li ng-repeat="notif in notifs" ng-show="(notif.type=='friendRequest') && (notif.status== 'rejected')">     <!-- | filter: searchfilter4"-->
             <span class="ciara"></span>
             <div class="notification-avatar">
               <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">
                 <img class="img-circle imgNotif" ng-src="{{notif.sentBy.avatar}}" alt="Company Avatar">
               </a>
             </div>
             <div class="notification-description"><p>Your partner request with <a ng-click="changeIsUnread(notif._id)" ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">{{notif.sentBy.organisation}}</a> has been rejected.</p>
             </div>
           </li>
           <!-- Unread enabled device notification !hotovo! -->
            <li ng-repeat="notif in notifs" ng-show="(notif.type=='deviceEnabled') && (notif.status== 'waiting') ">  <!-- | filter: searchfilter3 -->
              <span class="ciara"></span>
              <div class="notification-avatar">
                <a ng-click="changeIsUnreadAndResponded(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">
                  <img class="img-circle imgNotif" ng-src="{{notif.deviceId.avatar}}" alt="Device Avatar">
                </a>
              </div>
              <div class="notification-description">
                <p>A new device has been activated:  <a ng-click="changeIsUnreadAndResponded(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">{{notif.deviceId.name}}</a>.</p>
              </div>
            </li>
            <!-- Unread disabled device notification !hotovo! -->
             <li ng-repeat="notif in notifs" ng-show="(notif.type=='deviceDisabled') && (notif.status== 'waiting') ">  <!-- | filter: searchfilter3 -->
              <span class="ciara"></span>
               <div class="notification-avatar">
                 <a ng-click="changeIsUnreadAndResponded(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">
                   <img class="img-circle imgNotif" ng-src="{{notif.deviceId.avatar}}" alt="Device Avatar">
                 </a>
               </div>
               <div class="notification-description">
                 <p>A device has been deactivated:  <a ng-click="changeIsUnreadAndResponded(notif._id)" ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">{{notif.deviceId.name}}</a>.</p>
               </div>
             </li>
             <!-- Unread new devices registered -->
              <li ng-repeat="notif in notifs" ng-show="(notif.type=='deviceDiscovered') && (notif.status== 'waiting') " ng-click="changeIsUnreadAndResponded(notif._id)">  <!-- | filter: searchfilter3 -->
                  <span class="ciara"></span>
                  <a class="padded"><b>New devices have been activated!</b></a>
              </li>

        <!-- Unread registration request notification -->
            <li ng-repeat="reg in registrations" ng-show="(reg.type=='registrationRequest') && (reg.status== 'waiting') ">        <!-- | filter: searchfilter4 -->
              <span class="ciara"></span>
              <div class="notification-avatar">
                <a ng-click="changeIsUnread(reg._id)" ui-sref="root.main.registrationProfile.regAdmin({registrationId: reg.sentByReg._id})">
                  <img class="img-circle imgNotif" ng-src="../../../../app/img/icons/data_request.png" alt="Company Avatar">
                </a>
              </div>
                <div class="notification-description">
                  <p> You have received a registration request from: </p><a ng-click="changeIsUnread(reg._id)" ui-sref="root.main.registrationProfile.regAdmin({registrationId: reg.sentByReg._id})"><p> {{reg.sentByReg.companyName}} </p></a>
                </div>
                <div class="notification-actions">
                  <button  ng-click="acceptRegistration(reg.sentByReg._id, reg._id)" type="button" class="btn btn-default btn-xs">Approve</button>
                  <button  ng-click="rejectRegistration(reg.sentByReg._id, reg._id)" type="button" class="btn btn-default btn-xs">Reject</button>
                </div>
            </li>

<!-- Read device notifications !hotovo! -->
      <li ng-repeat="notif in notifs2 "  ng-show="(notif.type=='deviceRequest') && (notif.status== 'waiting') " >        <!-- | filter: searchfilter1 -->
        <span class="ciara"></span>
        <div class="notification-avatar" id="readNot">
          <a ui-sref="root.main.deviceProfile.whoSee({deviceId: notif.deviceId._id})">
           <img class="img-circle imgNotif" ng-src="{{notif.deviceId.avatar}}" alt="Device Avatar">
          </a>
        </div>
        <div class="notification-description readNot"><p>You have device data request from <a ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">{{notif.sentBy.organisation}}</a>.</p>
        </div>
        <div class="notification-actions readNot">
          <button  ng-click="acceptDataRequest(notif.deviceId._id, notif._id)" type="button" class="btn btn-default btn-xs">Approve</button>     <!-- ng-show="notif.status =='waiting'" -->
          <button  ng-click="rejectDataRequest(notif.deviceId._id, notif._id)" type="button" class="btn btn-default btn-xs">Reject</button>
        </div>
      </li>
<!-- Read friend notifications !hotovo!-->
     <li ng-repeat="notif in notifs2 " ng-show="(notif.type=='friendRequest') && (notif.status== 'waiting') " >    <!-- | filter: searchfilter2 -->
        <span class="ciara"></span>
        <div  class="notification-avatar readNot">
          <a ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">
            <img class="img-circle imgNotif" ng-src="{{notif.sentBy.avatar}}" alt="Company Avatar">
          </a>
        </div>
        <div class="notification-description readNot"><p>You have partnership request from <a  ui-sref="root.main.companyProfile.devices({companyAccountId: notif.sentBy._id})">{{notif.sentBy.organisation}}</a>.</p>
        </div>
        <div class="notification-actions readNot">
          <button  ng-click="acceptNeighbourRequest(notif._id, notif.sentBy._id)" type="button" class="btn btn-default btn-xs">Accept</button>     <!-- ng-show="notif.status =='waiting'" -->
          <button  ng-click="rejectNeighbourRequest(notif._id, notif.sentBy._id)" type="button" class="btn btn-default btn-xs">Decline</button>
        </div>
      </li>

<!-- Read registration request notification-->
      <li ng-repeat="reg in registrationsRead" ng-show="(reg.type=='registrationRequest') && (reg.status== 'waiting') ">        <!-- | filter: searchfilter4 -->
        <span class="ciara"></span>
        <div class="notification-avatar readNot">
          <a ui-sref="root.main.registrationProfile.regAdmin({registrationId: reg.sentByReg._id})">
            <img class="img-circle imgNotif" ng-src="../../../../app/img/icons/data_request.png" alt="Company Avatar"/>
          </a>
        </div>
          <div class="notification-description readNot">
            <p> You have received a registration request from: </p><a ui-sref="root.main.registrationProfile.regAdmin({registrationId: reg.sentByReg._id})"><p> {{reg.sentByReg.companyName}} </p></a>
          </div>
          <div class="notification-actions readNot">
            <button  ng-click="acceptRegistration(reg.sentByReg._id, reg._id)" type="button" class="btn btn-default btn-xs">Approve</button>
            <button  ng-click="rejectRegistration(reg.sentByReg._id, reg._id)" type="button" class="btn btn-default btn-xs">Reject</button>
          </div>
      </li>
      <!-- end notification -->
    </ul>
  <li class="footNotif"><a ng-click="seeAll()"><b>View all</b></a></li>
</ul>
